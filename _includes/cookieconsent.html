<style>
#consent-overlay {
  display: none;
  position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.65); z-index: 9998;
}
#cookie-banner {
  position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%);
  background: #222; color: #fff; padding: 40px 60px;
  border-radius: 18px; box-shadow: 0 0 24px #000b; z-index: 9999;
  font-size: 2rem; display: none; max-width: 90vw; min-width: 550px;
  min-height: 130px; text-align: center;
}
#cookie-banner button {
  margin: 18px 18px 0 18px;
  padding: 18px 36px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-size: 1.2rem;
  font-weight: bold;
}
#cookie-accept { background: #14a7d0; color: #fff; }
#cookie-decline { background: #888; color: #fff; }
#cookie-banner a { color: #fff; text-decoration: underline; font-weight: bold; }

#no-access {
  display: none;
  position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
  background: rgba(20,20,20,0.96); color: #fff; z-index: 10000;
  font-size: 2.5rem; font-weight: bold;
  text-align: center; padding-top: 22vh;
  letter-spacing: 0.03em;
}
#no-access small {
  display: block;
  font-size: 1.2rem;
  margin-top: 3rem;
  font-weight: normal;
}
</style>

<div id="consent-overlay"></div>

<div id="cookie-banner">
  Diese Website nutzt Cookies für VG Wort (Reichweitenmessung).
  <a href="/datenschutz.html" target="_blank">Mehr Infos</a><br>
  <button id="cookie-accept">Akzeptieren</button>
  <button id="cookie-decline">Ablehnen</button>
</div>

<div id="no-access">
  Kein Zugriff ohne Cookie-Zustimmung.<br>
  <small>
    Bitte akzeptiere Cookies, um die Website zu nutzen.<br>
    <a href="/datenschutz.html" style="color:#fff;text-decoration:underline;" target="_blank">Mehr Infos</a>
  </small>
</div>

<script>
// Hilfsfunktion, um den aktuellen Pfad zu prüfen
function isDatenschutzPage() {
  return window.location.pathname === "/datenschutz.html";
}

function setCookie(n, v, d) {
  var date = new Date();
  date.setTime(date.getTime() + (d*24*60*60*1000));
  document.cookie = n + "=" + v + "; expires=" + date.toUTCString() + "; path=/";
}
function getCookie(n) {
  var nameEQ = n + "=";
  var ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
    var c = ca[i]; while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
  }
  return null;
}

function insertVGWortPixel() {
  // Testbild – bitte durch deinen echten VG-Wort-Pixel ersetzen!
  var src = "https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png";
  var img = document.createElement("img");
  img.src = src;
  img.style = "width:80px;height:80px;position:fixed;bottom:160px;left:30px;z-index:99999;border-radius:12px;border:2px solid #fff;box-shadow:0 2px 8px #0005;";
  img.alt = "Testbild";
  document.body.appendChild(img);
}

window.addEventListener('DOMContentLoaded', function(){
  if(isDatenschutzPage()) {
    // Kein Banner, kein Overlay, volle Bedienbarkeit auf /datenschutz.html
    document.getElementById('cookie-banner').style.display = "none";
    var overlay = document.getElementById('consent-overlay');
    if(overlay) overlay.style.display = "none";
    document.body.style.overflow = '';
    var na = document.getElementById('no-access');
    if(na) na.style.display = "none";
    return;
  }

  if(getCookie('vgw_consent') === "yes") {
    insertVGWortPixel();
  } else if(getCookie('vgw_consent') === "no") {
    document.getElementById('no-access').style.display = "block";
    document.body.style.overflow = 'hidden';
  } else {
    document.getElementById('cookie-banner').style.display = "block";
    document.getElementById('consent-overlay').style.display = "block";
    document.body.style.overflow = 'hidden';
  }
  document.getElementById('cookie-accept').onclick = function() {
    setCookie('vgw_consent', "yes", 365);
    document.getElementById('cookie-banner').style.display = "none";
    document.getElementById('consent-overlay').style.display = "none";
    document.getElementById('no-access').style.display = "none";
    document.body.style.overflow = '';
    insertVGWortPixel();
  }
  document.getElementById('cookie-decline').onclick = function() {
    setCookie('vgw_consent', "no", 365);
    document.getElementById('cookie-banner').style.display = "none";
    document.getElementById('consent-overlay').style.display = "none";
    document.getElementById('no-access').style.display = "block";
    document.body.style.overflow = 'hidden';
  }
});
</script>
